"use strict";(self.webpackChunkangular_conduit=self.webpackChunkangular_conduit||[]).push([[592],{9921:(O,D,r)=>{r.d(D,{J:()=>p});var s=r(529),g=r(4004),e=r(4650);let p=(()=>{class t{constructor(n){this.http=n}query(n){let l=new s.LE;return Object.keys(n.filters).forEach(c=>{l=l.set(c,n.filters[c])}),this.http.get("/articles"+("feed"===n.type?"/feed":""),{params:l})}get(n){return this.http.get(`/articles/${n}`).pipe((0,g.U)(l=>l.article))}delete(n){return this.http.delete(`/articles/${n}`)}create(n){return this.http.post("/articles/",{article:n}).pipe((0,g.U)(l=>l.article))}update(n){return this.http.put(`/articles/${n.slug}`,{article:n}).pipe((0,g.U)(l=>l.article))}favorite(n){return this.http.post(`/articles/${n}/favorite`,{}).pipe((0,g.U)(l=>l.article))}unfavorite(n){return this.http.delete(`/articles/${n}/favorite`)}static#t=this.\u0275fac=function(l){return new(l||t)(e.LFG(s.eN))};static#e=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()},8994:(O,D,r)=>{r.d(D,{P:()=>M});var s=r(540),g=r(4929),e=r(2605),p=r(6895),t=r(4650);function E(i,A){if(1&i&&(t.TgZ(0,"li",6),t._uU(1),t.qZA()),2&i){const a=A.$implicit;t.xp6(1),t.hij(" ",a," ")}}const n=function(i){return["/article",i]};let l=(()=>{class i{toggleFavorite(a){this.article.favorited=a,a?this.article.favoritesCount++:this.article.favoritesCount--}static#t=this.\u0275fac=function(u){return new(u||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-article-preview"]],inputs:{article:"article"},standalone:!0,features:[t.jDz],decls:13,vars:9,consts:[[1,"article-preview"],[3,"article"],[1,"pull-xs-right",3,"article","toggle"],[1,"preview-link",3,"routerLink"],[1,"tag-list"],["class","tag-default tag-pill tag-outline",4,"ngFor","ngForOf"],[1,"tag-default","tag-pill","tag-outline"]],template:function(u,o){1&u&&(t.TgZ(0,"div",0)(1,"app-article-meta",1)(2,"app-favorite-button",2),t.NdJ("toggle",function(P){return o.toggleFavorite(P)}),t._uU(3),t.qZA()(),t.TgZ(4,"a",3)(5,"h1"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Read more..."),t.qZA(),t.TgZ(11,"ul",4),t.YNc(12,E,2,1,"li",5),t.qZA()()()),2&u&&(t.xp6(1),t.Q6J("article",o.article),t.xp6(1),t.Q6J("article",o.article),t.xp6(1),t.hij(" ",o.article.favoritesCount," "),t.xp6(1),t.Q6J("routerLink",t.VKq(7,n,o.article.slug)),t.xp6(2),t.Oqu(o.article.title),t.xp6(2),t.Oqu(o.article.description),t.xp6(4),t.Q6J("ngForOf",o.article.tagList))},dependencies:[s.h,g.t,e.rH,p.sg],encapsulation:2})}return i})();var c=(()=>{return(i=c||(c={})).NOT_LOADED="NOT_LOADED",i.LOADING="LOADING",i.LOADED="LOADED",c;var i})(),m=r(7579),_=r(2722),L=r(9921);function v(i,A){1&i&&t._UZ(0,"app-article-preview",3),2&i&&t.Q6J("article",A.$implicit)}function C(i,A){1&i&&(t.TgZ(0,"div",4),t._uU(1," Loading articles...\n"),t.qZA())}function h(i,A){1&i&&(t.TgZ(0,"div",4),t._uU(1," No articles are here... yet.\n"),t.qZA())}const f=function(i){return{active:i}};function d(i,A){if(1&i){const a=t.EpF();t.TgZ(0,"li",7)(1,"button",8),t.NdJ("click",function(){const y=t.CHM(a).$implicit,P=t.oxw(2);return t.KtG(P.setPageTo(y))}),t._uU(2),t.qZA()()}if(2&i){const a=A.$implicit,u=t.oxw(2);t.Q6J("ngClass",t.VKq(2,f,a===u.currentPage)),t.xp6(2),t.hij(" ",a," ")}}function T(i,A){if(1&i&&(t.TgZ(0,"nav")(1,"ul",5),t.YNc(2,d,3,4,"li",6),t.qZA()()),2&i){const a=t.oxw();t.xp6(2),t.Q6J("ngForOf",a.totalPages)}}let M=(()=>{class i{constructor(a){this.articlesService=a,this.results=[],this.currentPage=1,this.totalPages=[],this.loading=c.NOT_LOADED,this.LoadingState=c,this.destroy$=new m.x}set config(a){a&&(this.query=a,this.currentPage=1,this.runQuery())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setPageTo(a){this.currentPage=a,this.runQuery()}runQuery(){this.loading=c.LOADING,this.results=[],this.limit&&(this.query.filters.limit=this.limit,this.query.filters.offset=this.limit*(this.currentPage-1)),this.articlesService.query(this.query).pipe((0,_.R)(this.destroy$)).subscribe(a=>{this.loading=c.LOADED,this.results=a.articles,this.totalPages=Array.from(new Array(Math.ceil(a.articlesCount/this.limit)),(u,o)=>o+1)})}static#t=this.\u0275fac=function(u){return new(u||i)(t.Y36(L.J))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-article-list"]],inputs:{limit:"limit",config:"config"},standalone:!0,features:[t.jDz],decls:4,vars:4,consts:[[3,"article",4,"ngFor","ngForOf"],["class","article-preview",4,"ngIf"],[4,"ngIf"],[3,"article"],[1,"article-preview"],[1,"pagination"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click"]],template:function(u,o){1&u&&(t.YNc(0,v,1,1,"app-article-preview",0),t.YNc(1,C,2,0,"div",1),t.YNc(2,h,2,0,"div",1),t.YNc(3,T,3,1,"nav",2)),2&u&&(t.Q6J("ngForOf",o.results),t.xp6(1),t.Q6J("ngIf",o.loading===o.LoadingState.LOADING),t.xp6(1),t.Q6J("ngIf",o.loading===o.LoadingState.LOADED&&!o.results.length),t.xp6(1),t.Q6J("ngIf",o.loading===o.LoadingState.LOADED&&o.totalPages.length>1))},dependencies:[l,p.sg,p.mk,p.O5],styles:[".page-link[_ngcontent-%COMP%]{cursor:pointer}"]})}return i})()},540:(O,D,r)=>{r.d(D,{h:()=>E});var s=r(2605),g=r(6895),e=r(4650);const p=function(n){return["/profile",n]},t=["*"];let E=(()=>{class n{static#t=this.\u0275fac=function(m){return new(m||n)};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-article-meta"]],inputs:{article:"article"},standalone:!0,features:[e.jDz],ngContentSelectors:t,decls:10,vars:12,consts:[[1,"article-meta"],[3,"routerLink"],[3,"src"],[1,"info"],[1,"author",3,"routerLink"],[1,"date"]],template:function(m,_){1&m&&(e.F$t(),e.TgZ(0,"div",0)(1,"a",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"a",4),e._uU(5),e.qZA(),e.TgZ(6,"span",5),e._uU(7),e.ALo(8,"date"),e.qZA()(),e.Hsn(9),e.qZA()),2&m&&(e.xp6(1),e.Q6J("routerLink",e.VKq(8,p,_.article.author.username)),e.xp6(1),e.Q6J("src",_.article.author.image,e.LSH),e.xp6(2),e.Q6J("routerLink",e.VKq(10,p,_.article.author.username)),e.xp6(1),e.hij(" ",_.article.author.username," "),e.xp6(2),e.hij(" ",e.xi3(8,5,_.article.createdAt,"longDate")," "))},dependencies:[s.rH,g.uU],encapsulation:2,changeDetection:0})}return n})()},4929:(O,D,r)=>{r.d(D,{t:()=>L});var s=r(4650),g=r(7579),e=r(3900),p=r(515),t=r(2722),E=r(6895),n=r(9921),l=r(2605),c=r(8386);const m=function(v,C,h){return{disabled:v,"btn-outline-primary":C,"btn-primary":h}},_=["*"];let L=(()=>{class v{constructor(h,f,d){this.articleService=h,this.router=f,this.userService=d,this.destroy$=new g.x,this.isSubmitting=!1,this.toggle=new s.vpe}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}toggleFavorite(){this.isSubmitting=!0,this.userService.isAuthenticated.pipe((0,e.w)(h=>h?this.article.favorited?this.articleService.unfavorite(this.article.slug):this.articleService.favorite(this.article.slug):(this.router.navigate(["/login"]),p.E)),(0,t.R)(this.destroy$)).subscribe({next:()=>{this.isSubmitting=!1,this.toggle.emit(!this.article.favorited)},error:()=>this.isSubmitting=!1})}static#t=this.\u0275fac=function(f){return new(f||v)(s.Y36(n.J),s.Y36(l.F0),s.Y36(c.K))};static#e=this.\u0275cmp=s.Xpm({type:v,selectors:[["app-favorite-button"]],inputs:{article:"article"},outputs:{toggle:"toggle"},standalone:!0,features:[s.jDz],ngContentSelectors:_,decls:3,vars:5,consts:[[1,"btn","btn-sm",3,"ngClass","click"],[1,"ion-heart"]],template:function(f,d){1&f&&(s.F$t(),s.TgZ(0,"button",0),s.NdJ("click",function(){return d.toggleFavorite()}),s._UZ(1,"i",1),s.Hsn(2),s.qZA()),2&f&&s.Q6J("ngClass",s.kEZ(1,m,d.isSubmitting,!d.article.favorited,d.article.favorited))},dependencies:[E.mk],encapsulation:2})}return v})()}}]);