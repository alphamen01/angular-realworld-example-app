"use strict";(self.webpackChunkangular_conduit=self.webpackChunkangular_conduit||[]).push([[418],{418:(d,l,r)=>{r.r(l),r.d(l,{SettingsComponent:()=>c});var e=r(433),u=r(6860),a=r(7579),m=r(2722),t=r(4650),g=r(2605),p=r(8386);let c=(()=>{class i{constructor(o,n){this.router=o,this.userService=n,this.settingsForm=new e.cw({image:new e.NI("",{nonNullable:!0}),username:new e.NI("",{nonNullable:!0}),bio:new e.NI("",{nonNullable:!0}),email:new e.NI("",{nonNullable:!0}),password:new e.NI("",{validators:[e.kI.required],nonNullable:!0})}),this.errors=null,this.isSubmitting=!1,this.destroy$=new a.x}ngOnInit(){this.settingsForm.patchValue(this.userService.getCurrentUser())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}logout(){this.userService.logout()}submitForm(){this.isSubmitting=!0,this.userService.update(this.settingsForm.value).pipe((0,m.R)(this.destroy$)).subscribe({next:({user:o})=>{this.router.navigate(["/profile/",o.username])},error:o=>{this.errors=o,this.isSubmitting=!1}})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(g.F0),t.Y36(p.K))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-settings-page"]],standalone:!0,features:[t.jDz],decls:25,vars:3,consts:[[1,"settings-page"],[1,"container","page"],[1,"row"],[1,"col-md-6","offset-md-3","col-xs-12"],[1,"text-xs-center"],[3,"errors"],[3,"formGroup","ngSubmit"],[3,"disabled"],[1,"form-group"],["type","text","placeholder","URL of profile picture","formControlName","image",1,"form-control"],["type","text","placeholder","Username","formControlName","username",1,"form-control","form-control-lg"],["rows","8","placeholder","Short bio about you","formControlName","bio",1,"form-control","form-control-lg"],["type","email","placeholder","Email","formControlName","email",1,"form-control","form-control-lg"],["type","password","placeholder","New Password","formControlName","password",1,"form-control","form-control-lg"],["type","submit",1,"btn","btn-lg","btn-primary","pull-xs-right"],[1,"btn","btn-outline-danger",3,"click"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),t._uU(5,"Your Settings"),t.qZA(),t._UZ(6,"app-list-errors",5),t.TgZ(7,"form",6),t.NdJ("ngSubmit",function(){return s.submitForm()}),t.TgZ(8,"fieldset",7)(9,"fieldset",8),t._UZ(10,"input",9),t.qZA(),t.TgZ(11,"fieldset",8),t._UZ(12,"input",10),t.qZA(),t.TgZ(13,"fieldset",8)(14,"textarea",11),t._uU(15,"              "),t.qZA()(),t.TgZ(16,"fieldset",8),t._UZ(17,"input",12),t.qZA(),t.TgZ(18,"fieldset",8),t._UZ(19,"input",13),t.qZA(),t.TgZ(20,"button",14),t._uU(21," Update Settings "),t.qZA()()(),t._UZ(22,"hr"),t.TgZ(23,"button",15),t.NdJ("click",function(){return s.logout()}),t._uU(24," Or click here to logout. "),t.qZA()()()()()),2&n&&(t.xp6(6),t.Q6J("errors",s.errors),t.xp6(1),t.Q6J("formGroup",s.settingsForm),t.xp6(1),t.Q6J("disabled",s.isSubmitting))},dependencies:[u.S,e.UX,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u],encapsulation:2})}return i})()}}]);